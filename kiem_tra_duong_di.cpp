#include <bits/stdc++.h>
#define ll long long
#define endl "\n"
#define pb push_back
#define is insert
#define pi pair<int, int>
#define vii vector<pi>
#define all(v) v.begin(), v.end()
#define ms(a) memset(a, 0, sizeof(a))
using namespace std;
vector<int> adj[1001];
bool visited[1001] = {0};
int cnt[1001] = {0}, dem = 0;
void dfs(int s)
{
    cnt[s] = dem;
    visited[s] = true;
    for (auto x : adj[s])
    {
        if (!visited[x])
        {
            dfs(x);
        }
    }
}

int main()
{
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    // freopen("input.txt", "r", stdin);
    // freopen("output.txt", "w", stdout);
    int k;
    cin >> k;
    while (k--)
    {

        int n, m;
        cin >> n >> m;
        for (int i = 1; i <= m; i++)
        {
            int x, y;
            cin >> x >> y;
            adj[x].pb(y);
            adj[y].pb(x);
        }
        for (int i = 1; i <= n; i++)
        {
            sort(all(adj[i]));
        }
        for (int i = 1; i <= n; i++)
        {
            if (!visited[i])
            {
                dem++;
                dfs(i);
            }
        }
        int t;
        cin >> t;
        while (t--)
        {
            int x, y;
            cin >> x >> y;
            if (cnt[x] == cnt[y])
            {
                cout << "YES" << endl;
            }
            else
                cout << "NO" << endl;
        }
        ms(visited);
        for (auto &x : adj)
            x.clear();
        dem = 0;
        ms(cnt);
    }
    return 0;
}
/*
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@##################@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@#############################@@@@@@@@@@@@@@@@
@@@@@@@@@@@@&####################################@@@@@@@@@@@@
@@@@@@@@@@##########################################@@@@@@@@@
@@@@@@@@##############################################@@@@@@@
@@@@@@#################################################@@@@@@
@@@@@####################################################@@@@
@@@%#####################@@@@@@@@@@@######################@@@
@@@###################@@@@@@@@@@@@@@@@@####################@@
@@##################@@@@@@         @@@@@@##################@@
@@#################@@@@@             @@@@###################@
@@@@@@@@@@@@@@@@@@@@@@@@             @@@@@@@@@@@@@@@@@@@@@@@@
@                  &@@@@             @@@@           .......@@
@@                  @@@@@@         @@@@@@           .......@@
@@                    @@@@@@@@@@@@@@@@@            .......@@@
@@@                      @@@@@@@@@@@               ......@@@@
@@@@                                              ......@@@@@
@@@@@@                                           ......@@@@@@
@@@@@@@                                         .....@@@@@@@@
@@@@@@@@@                                     .....@@@@@@@@@@
@@@@@@@@@@@@                                ....@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@                         ....@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@%                .@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
     AAAaaaaaaaaa
    aAAA@@@@@@@@@a
    @AAA@@@@@@@@@@
    @AAA@@@@@@@@@@
    aAAA@@@@@@@@@a
    `AAAA@@@@@@@@'
     @AAA@@@@@@@@
     @AAAA@@@@@@@
     @AAA@@@@@@@@             __.----._
     aAAA@@@@@@@a        _.--':::::::: `-._     __.--------.
     `@AA@@@@@@@'     ,-':::::: :::::::::__`;--' _.---~~~~`.`.
      @AA@@@@@@@     .': :::::::: ::,---'_____,-|||||||||||||:
      @AA@@@@@@@   .':::: :::::::_.-'`-'~      `\||||||||||||:
      aAA@@@@@@a .'::::::: :::,-'....     .:::.   \||||||||||:
      `@AA@@@@@'.': ::::::: ,'........  ,,'  __ \  :|||||||_,'
       @AA@@@@@ :::: ::::::; ......... ::  /' C| ) |||||,-'
       @AA@@@@@ ::::: ::,-;__ ...         `--~~` \ `._'
       @AA@@@@@ `.;;;;,',~-._`-,            _.-'  )  _`-_
       @AA@@@@@  :;;;;|:   _ `-'                 (_,'-;;-)
       @AA@@@@@  `.;.'::  ; )                .         ".
       @AA@@@@@   :.'.`.`. \  (\              :       __|
       @AA@@@@@    `... :`. `  :;              ;    /~--~\
       @AA@@@@@     : ...`.`-.;,'             '    ||    ||
       @AA@@@@@      `.... ~`--'              :    ::__,-||
       aAA@@@@a       :                       .    `-.~~~;'
       `@AA@@@'        `.                     :          `.
        @AA@@@           `.                    .     :     ;
        @AA@@@             :-._ _                    `.___,'
        @AA@@@             ::    `- - - ._ _              '
        @AA@@@             ::                ` - - .____.'
        @AA@@@             ::                     ,'
        @AA@@@       _--~~  ::                  ,'
        @AA@@@   _,-';;;;;; ::                  ;-____
      __@@@@@@__'::::::::::: \._                |:::::;----._
     ;          ~~~.;;;;;;;;;;; \._             /::::::::::::;-._
     ;  ;~~~~--____  `;;::::::::::::\._        /:::::::::::::::::;-_
     `--,--'~~~   _`   \;::::::::::::: \._   /::::::::::::::::::::;;;-._
    :::;   ___.--' `    `;;:::::::::::::: \/ :::::::::::::::::::::::::::`.
  :::::;  :     _.-.      `;:::::::::::::::||:::::::::::_,-'||||||||||||;;.
 ::::::`\_;   :'    `       `-.__ :::::::::||:::::::_,-'|||||||||||||||||;;
::::::::@@:  :'  /----           `---._:::::||::::,'|||||||||||||||||||||;;
:: .------------  -. `           ,'####`-.___||:::|||||||||||||||||||||||;|
::(       ________  `._____     ,'###########`--.'_ `--|||||||||||||||||;,'
::(               `--'-.:| `-._,'#########################`--.||||||||||,'
::(       --------.___.;:|  |\ `-.##############################`-.||||.'
::(     _ ____    ;::::::|  |:\  |:`-.#############################||||'
::\`._   `@@@@`---'::::|:|__|::\_|::|__`-.#####################,-####,'
:::\  `-. `@@@@@@@|::::||:::::::::::::::::|`-.#############,-'#######'
:::/`   `._;aaaaa/:||:::|||:::::::::|:::::||:::`-.######,':::
::/         ~~~~~::||||:::|||::::::::||:::||:::::::`--':::::
 /      `--__(::::||||||:::::|||:::::::||:||:::::::::::::::
             /::::|||||||:::::::|||::::||:||::::::::::::::
             MOT DAM AC !!!
*/
